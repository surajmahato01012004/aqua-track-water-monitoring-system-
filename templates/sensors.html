{% extends "layout.html" %}

{% block title %}Aqua Track: Water Quality Monitoring System - Sensors{% endblock %}

{% block extra_css %}
<style>
  .stat-card { min-height: 120px; }
  .stat-value { font-size: 1.75rem; }
  .table-fixed { table-layout: fixed; }
  .table-fixed th, .table-fixed td { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
</style>
{% endblock %}

{% block content %}
  <div class="row g-4">
    <div class="col-12">
      <div class="card shadow">
        <div class="card-header d-flex justify-content-between align-items-center bg-white">
          <h5 class="mb-0">ESP32 Sensor Feed</h5>
          <span id="last-update" class="text-muted small">Waiting for data…</span>
        </div>
        <div class="card-body">
          <div id="sensor-container" class="row g-3 d-none">
            <div class="col-12 col-sm-3">
              <div class="card stat-card border-0">
                <div class="card-body">
                  <div class="text-muted">Temperature (°C)</div>
                  <div id="stat-temp" class="stat-value fw-bold">—</div>
                </div>
              </div>
            </div>
            <div class="col-12 col-sm-3">
              <div class="card stat-card border-0">
                <div class="card-body">
                  <div class="text-muted">pH</div>
                  <div id="stat-ph" class="stat-value fw-bold">—</div>
                </div>
              </div>
            </div>
            <div class="col-12 col-sm-3">
              <div class="card stat-card border-0">
                <div class="card-body">
                  <div class="text-muted">Turbidity</div>
                  <div id="stat-turbidity" class="stat-value fw-bold">—</div>
                </div>
              </div>
            </div>
            <div class="col-12 col-sm-3">
              <div class="card stat-card border-0">
                <div class="card-body">
                  <div class="d-flex justify-content-between align-items-center">
                    <div class="text-muted">WQI</div>
                    <span id="badge-wqi" class="badge bg-secondary">—</span>
                  </div>
                  <div id="stat-wqi" class="stat-value fw-bold mt-1">—</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='sensors.js') }}"></script>
{% endblock %}
